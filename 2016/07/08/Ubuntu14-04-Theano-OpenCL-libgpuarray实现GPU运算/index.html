<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="日拱一卒，功不唐捐"><title>Ubuntu14.04+Theano+OpenCL+libgpuarray实现GPU运算 | Marcovaldo</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Ubuntu14.04+Theano+OpenCL+libgpuarray实现GPU运算</h1><a id="logo" href="/.">Marcovaldo</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/LeetCode/"><i class="fa fa-list"> LeetCode</i></a><a href="/Booklist/"><i class="fa fa-book"> Booklist</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Ubuntu14.04+Theano+OpenCL+libgpuarray实现GPU运算</h1><div class="post-meta">Jul 8, 2016<span> | </span><span class="category"><a href="/categories/Machine-Learning/">Machine Learning</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2016/07/08/Ubuntu14-04-Theano-OpenCL-libgpuarray实现GPU运算/" href="/2016/07/08/Ubuntu14-04-Theano-OpenCL-libgpuarray实现GPU运算/#comments" class="ds-thread-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Ubuntu14-04双系统"><span class="toc-number">1.</span> <span class="toc-text">安装Ubuntu14.04双系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装AMD显卡驱动"><span class="toc-number">2.</span> <span class="toc-text">安装AMD显卡驱动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装AMD-APP-SDK"><span class="toc-number">3.</span> <span class="toc-text">安装AMD APP SDK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#升级python"><span class="toc-number">4.</span> <span class="toc-text">升级python</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装libgpuarray"><span class="toc-number">5.</span> <span class="toc-text">安装libgpuarray</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-number">6.</span> <span class="toc-text">参考链接</span></a></li></ol></div></div><div class="post-content"><p>上一篇博客介绍了如何使用Theano+logistic regression来实现kaggle上的数字手写识别，文末提到了CPU计算实在太慢，因此在做完这个实验之后，博主查阅了Theano的文档，了解到Theano官方仅支持CUDA进行GPU运算，不支持OpenCL，也就是说Theano官方仅支持N卡。原因是，CUDA和OpenCL是两个GPU计算平台，CUDA仅支持N卡，OpenCL支持所有的显卡，二者的具体区别还请自行查询。无奈博主的笔记本有一张intel的集成显卡和AMD的一张入门独显，而Theano非官方的提供了<a href="http://deeplearning.net/software/libgpuarray/installation.html" target="_blank" rel="external">libgpuarray</a>来支持OpenCL，因此博主花了大量的时间来尝试安装libgpuarray。<br><a id="more"></a><br>libgpuarray支持的OS有Debian6，Ubuntu14.04，MAC OS X10.11和win7，而网上能找到的成功安装libgpuarray的只有两篇博文，全是在MAC OS上，这里给出博文链接，供后面的同学参考：<br><a href="https://www.robberphex.com/2016/05/521" target="_blank" rel="external">https://www.robberphex.com/2016/05/521</a><br><a href="http://codechina.org/2016/04/how-to-install-theano-on-mac-os-x-ei-caption-with-opencl-support/" target="_blank" rel="external">http://codechina.org/2016/04/how-to-install-theano-on-mac-os-x-ei-caption-with-opencl-support/</a></p>
<p>博主的最初OS是win7，整个6月的空闲时间几乎都用在安装libgpuarray上了，遇到了无数个坑，然并卵，最终也没能成功。这里列出在win7上安装libgpuarray需要的一些环境，供后面的同学参考：</p>
<ul>
<li>最新的AMD显卡驱动，具体可前往<a href="http://support.amd.com/zh-cn/download" target="_blank" rel="external">AMD官网</a>查询</li>
<li>AMD APP SDK，其提供了OpenCL</li>
<li>Cmake &gt;= 3.0 (<a href="https://cmake.org/" target="_blank" rel="external">cmake</a>)</li>
<li>g++，一般我们可以通过wingw或TDW-GCC来安装</li>
<li>visual studio</li>
<li>clBLAS (<a href="">clblas</a>)</li>
<li>libcheck</li>
</ul>
<p>7月份在win7上装了Ubuntu14.04的双系统，尝试在Ubuntu上实现Theano+OpenCL的GPU运算，最终libgpuarray算是安装成功吧，只是还不能用A卡来计算，具体问题文末介绍。下面介绍整个过程。</p>
<h2 id="安装Ubuntu14-04双系统"><a href="#安装Ubuntu14-04双系统" class="headerlink" title="安装Ubuntu14.04双系统"></a>安装Ubuntu14.04双系统</h2><p>我的win7/Ubuntu14.04双系统安装过程参考了<a href="http://m.blog.csdn.net/article/details?id=43987599" target="_blank" rel="external">http://m.blog.csdn.net/article/details?id=43987599</a> 这篇博文比较简单，这里不再展开。</p>
<h2 id="安装AMD显卡驱动"><a href="#安装AMD显卡驱动" class="headerlink" title="安装AMD显卡驱动"></a>安装AMD显卡驱动</h2><p>博主开始是死在了这里，AMD驱动装坏了好几次，装坏了的结果就是重启后不能进入图形界面。然后只能在tty或者initramfs进行修复，这对于博主这种第一次接触linux的人来说太困难了，往往修复好了还是不能用，只好重装系统，整个过程重装了七八次。这里我介绍一种安装驱动的方法，比较简单快速（至少我是一次就成功了）。</p>
<p>在安装好Ubuntu14.04之后，第一件事就是换驱动。找到附加驱动，如下图所示，系统初始使用的驱动是开源的，我们选择来自fglrx的专有驱动，然后点击“应用更改”按钮，静静的等它装完重启。</p>
<p><img src="http://7xsbsy.com1.z0.glb.clouddn.com/附加驱动.png" alt="附加驱动.png"></p>
<p>重启后打开终端，输入fglrxinfo，终端会返回显卡信息，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">marcovaldo@marcovaldong:~$ fglrxinfo</div><div class="line">display: :0  screen: 0</div><div class="line">OpenGL vendor string: Advanced Micro Devices, Inc.</div><div class="line">OpenGL renderer string: AMD Radeon HD 7400M Series</div><div class="line">OpenGL version string: 4.5.13399 Compatibility Profile Context 15.201.1151</div></pre></td></tr></table></figure></p>
<p>再在终端输入fgl_glxgears，会跳出一个测试窗口（旋转的方块），这就证明显卡驱动安装成功。这里，博主找到了安装驱动的比较好的方法，供后面的同学参考。<br><a href="http://forum.ubuntu.org.cn/viewtopic.php?t=445434" target="_blank" rel="external">http://forum.ubuntu.org.cn/viewtopic.php?t=445434</a><br><a href="http://www.tuicool.com/articles/6N3e2ir" target="_blank" rel="external">http://www.tuicool.com/articles/6N3e2ir</a></p>
<h2 id="安装AMD-APP-SDK"><a href="#安装AMD-APP-SDK" class="headerlink" title="安装AMD APP SDK"></a>安装AMD APP SDK</h2><p>前往<a href="http://developer.amd.com/tools-and-sdks/opencl-zone/amd-accelerated-parallel-processing-app-sdk/" target="_blank" rel="external">AMD官网</a>下载SDK（注意OS和位数），我这里下载的是Linux64位版AMD APP SDK 3.0。文件解压后出现一个.sh文件，终端输入命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo sh AMD-APP-SDK-v3.0.130.136-GA-linux64.sh</div></pre></td></tr></table></figure></p>
<p>AMDSDK默认会安装在/opt/下，这时候在终端输入clinfo命令会返回OpenCL平台信息和计算设备信息，下面给出我的笔记本的数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div></pre></td><td class="code"><pre><div class="line">marcovaldo@marcovaldong:~$ clinfo</div><div class="line">Number of platforms:				 1</div><div class="line">  Platform Profile:				 FULL_PROFILE</div><div class="line">  Platform Version:				 OpenCL 2.0 AMD-APP (1800.11)</div><div class="line">  Platform Name:				 AMD Accelerated Parallel Processing</div><div class="line">  Platform Vendor:				 Advanced Micro Devices, Inc.</div><div class="line">  Platform Extensions:				 cl_khr_icd cl_amd_event_callback cl_amd_offline_devices </div><div class="line"></div><div class="line"></div><div class="line">  Platform Name:				 AMD Accelerated Parallel Processing</div><div class="line">Number of devices:				 2</div><div class="line">  Device Type:					 CL_DEVICE_TYPE_GPU</div><div class="line">  Vendor ID:					 1002h</div><div class="line">  Board name:					 AMD Radeon HD 7400M Series</div><div class="line">  Device Topology:				 PCI[ B#1, D#0, F#0 ]</div><div class="line">  Max compute units:				 2</div><div class="line">  Max work items dimensions:			 3</div><div class="line">    Max work items[0]:				 256</div><div class="line">    Max work items[1]:				 256</div><div class="line">    Max work items[2]:				 256</div><div class="line">  Max work group size:				 256</div><div class="line">  Preferred vector width char:			 16</div><div class="line">  Preferred vector width short:			 8</div><div class="line">  Preferred vector width int:			 4</div><div class="line">  Preferred vector width long:			 2</div><div class="line">  Preferred vector width float:			 4</div><div class="line">  Preferred vector width double:		 0</div><div class="line">  Native vector width char:			 16</div><div class="line">  Native vector width short:			 8</div><div class="line">  Native vector width int:			 4</div><div class="line">  Native vector width long:			 2</div><div class="line">  Native vector width float:			 4</div><div class="line">  Native vector width double:			 0</div><div class="line">  Max clock frequency:				 700Mhz</div><div class="line">  Address bits:					 32</div><div class="line">  Max memory allocation:			 134217728</div><div class="line">  Image support:				 Yes</div><div class="line">  Max number of images read arguments:		 128</div><div class="line">  Max number of images write arguments:		 8</div><div class="line">  Max image 2D width:				 16384</div><div class="line">  Max image 2D height:				 16384</div><div class="line">  Max image 3D width:				 2048</div><div class="line">  Max image 3D height:				 2048</div><div class="line">  Max image 3D depth:				 2048</div><div class="line">  Max samplers within kernel:			 16</div><div class="line">  Max size of kernel argument:			 1024</div><div class="line">  Alignment (bits) of base address:		 2048</div><div class="line">  Minimum alignment (bytes) for any datatype:	 128</div><div class="line">  Single precision floating point capability</div><div class="line">    Denorms:					 No</div><div class="line">    Quiet NaNs:					 Yes</div><div class="line">    Round to nearest even:			 Yes</div><div class="line">    Round to zero:				 Yes</div><div class="line">    Round to +ve and infinity:			 Yes</div><div class="line">    IEEE754-2008 fused multiply-add:		 Yes</div><div class="line">  Cache type:					 None</div><div class="line">  Cache line size:				 0</div><div class="line">  Cache size:					 0</div><div class="line">  Global memory size:				 536870912</div><div class="line">  Constant buffer size:				 65536</div><div class="line">  Max number of constant args:			 8</div><div class="line">  Local memory type:				 Scratchpad</div><div class="line">  Local memory size:				 32768</div><div class="line">  Max pipe arguments:				 0</div><div class="line">  Max pipe active reservations:			 0</div><div class="line">  Max pipe packet size:				 0</div><div class="line">  Max global variable size:			 0</div><div class="line">  Max global variable preferred total size:	 0</div><div class="line">  Max read/write image args:			 0</div><div class="line">  Max on device events:				 0</div><div class="line">  Queue on device max size:			 0</div><div class="line">  Max on device queues:				 0</div><div class="line">  Queue on device preferred size:		 0</div><div class="line">  SVM capabilities:				 </div><div class="line">    Coarse grain buffer:			 No</div><div class="line">    Fine grain buffer:				 No</div><div class="line">    Fine grain system:				 No</div><div class="line">    Atomics:					 No</div><div class="line">  Preferred platform atomic alignment:		 0</div><div class="line">  Preferred global atomic alignment:		 0</div><div class="line">  Preferred local atomic alignment:		 0</div><div class="line">  Kernel Preferred work group size multiple:	 64</div><div class="line">  Error correction support:			 0</div><div class="line">  Unified memory for Host and Device:		 0</div><div class="line">  Profiling timer resolution:			 1</div><div class="line">  Device endianess:				 Little</div><div class="line">  Available:					 Yes</div><div class="line">  Compiler available:				 Yes</div><div class="line">  Execution capabilities:				 </div><div class="line">    Execute OpenCL kernels:			 Yes</div><div class="line">    Execute native function:			 No</div><div class="line">  Queue on Host properties:				 </div><div class="line">    Out-of-Order:				 No</div><div class="line">    Profiling :					 Yes</div><div class="line">  Queue on Device properties:				 </div><div class="line">    Out-of-Order:				 No</div><div class="line">    Profiling :					 No</div><div class="line">  Platform ID:					 0x7f98e6833430</div><div class="line">  Name:						 Caicos</div><div class="line">  Vendor:					 Advanced Micro Devices, Inc.</div><div class="line">  Device OpenCL C version:			 OpenCL C 1.2 </div><div class="line">  Driver version:				 1800.11</div><div class="line">  Profile:					 FULL_PROFILE</div><div class="line">  Version:					 OpenCL 1.2 AMD-APP (1800.11)</div><div class="line">  Extensions:					 cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_3d_image_writes cl_khr_byte_addressable_store cl_khr_gl_sharing cl_ext_atomic_counters_32 cl_amd_device_attribute_query cl_amd_vec3 cl_amd_printf cl_amd_media_ops cl_amd_media_ops2 cl_amd_popcnt cl_amd_image2d_from_buffer_read_only cl_khr_spir cl_khr_gl_event </div><div class="line"></div><div class="line"></div><div class="line">  Device Type:					 CL_DEVICE_TYPE_CPU</div><div class="line">  Vendor ID:					 1002h</div><div class="line">  Board name:					 </div><div class="line">  Max compute units:				 4</div><div class="line">  Max work items dimensions:			 3</div><div class="line">    Max work items[0]:				 1024</div><div class="line">    Max work items[1]:				 1024</div><div class="line">    Max work items[2]:				 1024</div><div class="line">  Max work group size:				 1024</div><div class="line">  Preferred vector width char:			 16</div><div class="line">  Preferred vector width short:			 8</div><div class="line">  Preferred vector width int:			 4</div><div class="line">  Preferred vector width long:			 2</div><div class="line">  Preferred vector width float:			 8</div><div class="line">  Preferred vector width double:		 4</div><div class="line">  Native vector width char:			 16</div><div class="line">  Native vector width short:			 8</div><div class="line">  Native vector width int:			 4</div><div class="line">  Native vector width long:			 2</div><div class="line">  Native vector width float:			 8</div><div class="line">  Native vector width double:			 4</div><div class="line">  Max clock frequency:				 2299Mhz</div><div class="line">  Address bits:					 64</div><div class="line">  Max memory allocation:			 2147483648</div><div class="line">  Image support:				 Yes</div><div class="line">  Max number of images read arguments:		 128</div><div class="line">  Max number of images write arguments:		 64</div><div class="line">  Max image 2D width:				 8192</div><div class="line">  Max image 2D height:				 8192</div><div class="line">  Max image 3D width:				 2048</div><div class="line">  Max image 3D height:				 2048</div><div class="line">  Max image 3D depth:				 2048</div><div class="line">  Max samplers within kernel:			 16</div><div class="line">  Max size of kernel argument:			 4096</div><div class="line">  Alignment (bits) of base address:		 1024</div><div class="line">  Minimum alignment (bytes) for any datatype:	 128</div><div class="line">  Single precision floating point capability</div><div class="line">    Denorms:					 Yes</div><div class="line">    Quiet NaNs:					 Yes</div><div class="line">    Round to nearest even:			 Yes</div><div class="line">    Round to zero:				 Yes</div><div class="line">    Round to +ve and infinity:			 Yes</div><div class="line">    IEEE754-2008 fused multiply-add:		 Yes</div><div class="line">  Cache type:					 Read/Write</div><div class="line">  Cache line size:				 64</div><div class="line">  Cache size:					 32768</div><div class="line">  Global memory size:				 6161788928</div><div class="line">  Constant buffer size:				 65536</div><div class="line">  Max number of constant args:			 8</div><div class="line">  Local memory type:				 Global</div><div class="line">  Local memory size:				 32768</div><div class="line">  Max pipe arguments:				 16</div><div class="line">  Max pipe active reservations:			 16</div><div class="line">  Max pipe packet size:				 2147483648</div><div class="line">  Max global variable size:			 1879048192</div><div class="line">  Max global variable preferred total size:	 1879048192</div><div class="line">  Max read/write image args:			 64</div><div class="line">  Max on device events:				 0</div><div class="line">  Queue on device max size:			 0</div><div class="line">  Max on device queues:				 0</div><div class="line">  Queue on device preferred size:		 0</div><div class="line">  SVM capabilities:				 </div><div class="line">    Coarse grain buffer:			 No</div><div class="line">    Fine grain buffer:				 No</div><div class="line">    Fine grain system:				 No</div><div class="line">    Atomics:					 No</div><div class="line">  Preferred platform atomic alignment:		 0</div><div class="line">  Preferred global atomic alignment:		 0</div><div class="line">  Preferred local atomic alignment:		 0</div><div class="line">  Kernel Preferred work group size multiple:	 1</div><div class="line">  Error correction support:			 0</div><div class="line">  Unified memory for Host and Device:		 1</div><div class="line">  Profiling timer resolution:			 1</div><div class="line">  Device endianess:				 Little</div><div class="line">  Available:					 Yes</div><div class="line">  Compiler available:				 Yes</div><div class="line">  Execution capabilities:				 </div><div class="line">    Execute OpenCL kernels:			 Yes</div><div class="line">    Execute native function:			 Yes</div><div class="line">  Queue on Host properties:				 </div><div class="line">    Out-of-Order:				 No</div><div class="line">    Profiling :					 Yes</div><div class="line">  Queue on Device properties:				 </div><div class="line">    Out-of-Order:				 No</div><div class="line">    Profiling :					 No</div><div class="line">  Platform ID:					 0x7f98e6833430</div><div class="line">  Name:						 Intel(R) Core(TM) i3-2350M CPU @ 2.30GHz</div><div class="line">  Vendor:					 GenuineIntel</div><div class="line">  Device OpenCL C version:			 OpenCL C 1.2 </div><div class="line">  Driver version:				 1800.11 (sse2,avx)</div><div class="line">  Profile:					 FULL_PROFILE</div><div class="line">  Version:					 OpenCL 1.2 AMD-APP (1800.11)</div><div class="line">  Extensions:					 cl_khr_fp64 cl_amd_fp64 cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_3d_image_writes cl_khr_byte_addressable_store cl_khr_gl_sharing cl_ext_device_fission cl_amd_device_attribute_query cl_amd_vec3 cl_amd_printf cl_amd_media_ops cl_amd_media_ops2 cl_amd_popcnt cl_khr_spir cl_khr_gl_event</div></pre></td></tr></table></figure></p>
<p>另外还要在/root/.bashrc文件中添加环境变量，具体如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># AMD APP SDK</div><div class="line">export AMDAPPSDKROOT=&quot;/opt/AMDAPPSDK-3.0&quot;</div><div class="line">export AMDAPPSDKSAMPLESROOT=&quot;/opt/AMDAPPSDK-3.0/&quot;&quot;</div><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:&quot;/opt/AMDAPP/lib/x86_64&quot;:&quot;/opt/AMDAPP/lib/x86&quot;</div><div class="line">export ATISTREAMSDKROOT=$AMDAPPSDKROOT</div></pre></td></tr></table></figure></p>
<p>到这里，AMD APP SDK就算是安装好了，下面再给出我参考的几篇博文：<br><a href="https://www.blackmoreops.com/2013/11/22/install-amd-app-sdk-kali-linux/" target="_blank" rel="external">https://www.blackmoreops.com/2013/11/22/install-amd-app-sdk-kali-linux/</a><br><a href="http://blog.csdn.net/vblittleboy/article/details/8979288" target="_blank" rel="external">http://blog.csdn.net/vblittleboy/article/details/8979288</a></p>
<h2 id="升级python"><a href="#升级python" class="headerlink" title="升级python"></a>升级python</h2><p>Ubuntu14.04自带的python版本是2.7.6的，我这里把它升级成了2.7.11的，具体方法是在终端输入下面三条命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:fkrull/deadsnakes-python2.7</div><div class="line">sudo apt-get update  </div><div class="line">sudo apt-get upgrade</div></pre></td></tr></table></figure></p>
<h2 id="安装libgpuarray"><a href="#安装libgpuarray" class="headerlink" title="安装libgpuarray"></a>安装libgpuarray</h2><p>为了防止安装过程出现错误影响整个python的环境，这里我们使用python的虚拟环境。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install python-virtualenv</div><div class="line">sudo apt-get install python-pip</div><div class="line">virtualenv venv</div><div class="line">source venv/bin/activate</div></pre></td></tr></table></figure></p>
<p>然后我们就进入了python的一个虚拟环境venv，下面的操作全是在venv中进行的。首先安装Theano和libgpuarray的一些依赖包，具体要求看<a href="http://deeplearning.net/software/libgpuarray/installation.html" target="_blank" rel="external">libgpuarray官方文档</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pip install numpy</div><div class="line">pip install Cython</div><div class="line">pip install Scipy</div></pre></td></tr></table></figure></p>
<p>安装scipy时可能会报错，可参考下面链接来修复：<br><a href="http://stackoverflow.com/questions/11114225/installing-scipy-and-numpy-using-pip" target="_blank" rel="external">http://stackoverflow.com/questions/11114225/installing-scipy-and-numpy-using-pip</a></p>
<p>然后是安装Theano，注意版本号为0.8.2的稳定Theano跟libgpuarray是不同步的，在使用时会报错，具体文末会提到。这里我安装的是Theano(0.9.0dev)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pip install git+https://github.com/Theano/Theano.git</div><div class="line"># 这里我使用的是robberphex的CSDN镜像，在此表示感谢</div><div class="line"># pip install git+https://code.csdn.net/u010096836/theano.git</div></pre></td></tr></table></figure></p>
<p>这里还用到了<a href="https://libcheck.github.io/check/" target="_blank" rel="external">libcheck</a>，因此装上它：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install check</div></pre></td></tr></table></figure></p>
<p>下面开始安装libgpuarray<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/Theano/libgpuarray.git</div><div class="line">cd libgpuarray</div><div class="line">mkdir Build</div><div class="line">cd Build</div><div class="line">cmake . -DCMAKE_INSTALL_PREFIX=../venv/ -DCMAKE_BUILD_TYPE=Release</div><div class="line">make install </div><div class="line"></div><div class="line">export LIBRARY_PATH=$LIBRARY_PATH:$PWD/../venv/lib</div><div class="line">export CPATH=$CPATH:$PWD/../venv/</div><div class="line"></div><div class="line">python setup.py build</div><div class="line">python setup.py install</div></pre></td></tr></table></figure></p>
<p>下面开始测试一下，Theano官方给出了一段测试程序，我们命名为test.py，程序如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> theano <span class="keyword">import</span> function, config, shared, tensor, sandbox</div><div class="line"><span class="keyword">import</span> numpy</div><div class="line"><span class="keyword">import</span> time</div><div class="line"> </div><div class="line">vlen = <span class="number">10</span> * <span class="number">30</span> * <span class="number">768</span>  <span class="comment"># 10 x #cores x # threads per core</span></div><div class="line">iters = <span class="number">1000</span></div><div class="line"> </div><div class="line">rng = numpy.random.RandomState(<span class="number">22</span>)</div><div class="line">x = shared(numpy.asarray(rng.rand(vlen), config.floatX))</div><div class="line">f = function([], tensor.exp(x))</div><div class="line">print(f.maker.fgraph.toposort())</div><div class="line">t0 = time.time()</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(iters):</div><div class="line">    r = f()</div><div class="line">t1 = time.time()</div><div class="line">print(<span class="string">"Looping %d times took %f seconds"</span> % (iters, t1 - t0))</div><div class="line">print(<span class="string">"Result is %s"</span> % (r,))</div><div class="line"><span class="keyword">if</span> numpy.any([isinstance(x.op, tensor.Elemwise) <span class="keyword">and</span></div><div class="line">              (<span class="string">'Gpu'</span> <span class="keyword">not</span> <span class="keyword">in</span> type(x.op).__name__)</div><div class="line">              <span class="keyword">for</span> x <span class="keyword">in</span> f.maker.fgraph.toposort()]):</div><div class="line">    print(<span class="string">'Used the cpu'</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">'Used the gpu'</span>)</div></pre></td></tr></table></figure></p>
<p>先是仅用Theano和CPU，结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(venv)marcovaldo@marcovaldong:~/desktop$ python test.py</div><div class="line">[Elemwise&#123;exp,no_inplace&#125;(&lt;TensorType(float64, vector)&gt;)]</div><div class="line">Looping 1000 times took 7.7898850441 seconds</div><div class="line">Result is [ 1.23178032  1.61879341  1.52278065 ...,  2.20771815  2.29967753</div><div class="line">  1.62323285]</div><div class="line">Used the cpu</div></pre></td></tr></table></figure></p>
<p>再是加了THEANO_FLAGS=mode=FAST_RUN的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(venv)marcovaldo@marcovaldong:~/desktop$ THEANO_FLAGS=mode=FAST_RUN,floatX=float32 python test.py</div><div class="line">[Elemwise&#123;exp,no_inplace&#125;(&lt;TensorType(float32, vector)&gt;)]</div><div class="line">Looping 1000 times took 3.86811089516 seconds</div><div class="line">Result is [ 1.23178029  1.61879337  1.52278066 ...,  2.20771813  2.29967761</div><div class="line">  1.62323284]</div><div class="line">Used the cpu</div><div class="line">(venv)marcovaldo@marcovaldong:~/desktop$ THEANO_FLAGS=mode=FAST_RUN,device=cpu,floatX=float32 python test.py</div><div class="line">[Elemwise&#123;exp,no_inplace&#125;(&lt;TensorType(float32, vector)&gt;)]</div><div class="line">Looping 1000 times took 3.84727883339 seconds</div><div class="line">Result is [ 1.23178029  1.61879337  1.52278066 ...,  2.20771813  2.29967761</div><div class="line">  1.62323284]</div><div class="line">Used the cpu</div></pre></td></tr></table></figure></p>
<p>下面使用OpenCL的时候就报错，网上没有找到有效的解决方法，希望有遇到过的大神给指点迷津，具体如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(venv)marcovaldo@marcovaldong:~/desktop$ THEANO_FLAGS=mode=FAST_RUN,device=opencl0:0,floatX=float32 python test.py</div><div class="line">ERROR (theano.sandbox.gpuarray): Could not initialize pygpu, support disabled</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;/home/marcovaldo/myvenv/venv/local/lib/python2.7/site-packages/theano/sandbox/gpuarray/__init__.py&quot;, line 96, in &lt;module&gt;</div><div class="line">    init_dev(config.device)</div><div class="line">  File &quot;/home/marcovaldo/myvenv/venv/local/lib/python2.7/site-packages/theano/sandbox/gpuarray/__init__.py&quot;, line 47, in init_dev</div><div class="line">    &quot;Make sure Theano and libgpuarray/pygpu &quot;</div><div class="line">RuntimeError: (&apos;Wrong major API version for gpuarray:&apos;, -9997, &apos;Make sure Theano and libgpuarray/pygpu are in sync.&apos;)</div><div class="line">[Elemwise&#123;exp,no_inplace&#125;(&lt;TensorType(float32, vector)&gt;)]</div><div class="line">Looping 1000 times took 3.86138486862 seconds</div><div class="line">Result is [ 1.23178029  1.61879337  1.52278066 ...,  2.20771813  2.29967761</div><div class="line">  1.62323284]</div><div class="line">Used the cpu</div></pre></td></tr></table></figure></p>
<p>到这里，如果你没有下面的这个问题，你的libgpuarray应该就算装好了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">RuntimeError: (&apos;Wrong major API version for gpuarray:&apos;, -9997, &apos;Make sure Theano and libgpuarray/pygpu are in sync.&apos;)</div><div class="line">RuntimeError: (&apos;Wrong major API version for gpuarray:&apos;, -9998, &apos;Make sure Theano and libgpuarray/pygpu are in sync.&apos;)</div></pre></td></tr></table></figure></p>
<p>接下来我会抽时间翻译一下libgpuarray的官方安装文档，供后来的同学参考。</p>
<p>现在的深度计算工具都是官方支持N卡，A卡在这方面实在太吃亏了，希望各个深度学习工具能尽快做出支持A卡的API。</p>
<p>最后鸣谢<a href="https://www.robberphex.com/" target="_blank" rel="external">robberphex</a>和<a href="http://codechina.org" target="_blank" rel="external">Tinyfool</a>，二位的博客给我提供了思路。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://deeplearning.net/software/libgpuarray/installation.html" target="_blank" rel="external">http://deeplearning.net/software/libgpuarray/installation.html</a></li>
<li><a href="https://www.robberphex.com/2016/05/521" target="_blank" rel="external">https://www.robberphex.com/2016/05/521</a></li>
<li><a href="http://codechina.org/2016/04/how-to-install-theano-on-mac-os-x-ei-caption-with-opencl-support/" target="_blank" rel="external">http://codechina.org/2016/04/how-to-install-theano-on-mac-os-x-ei-caption-with-opencl-support/</a></li>
<li><a href="http://m.blog.csdn.net/article/details?id=43987599" target="_blank" rel="external">http://m.blog.csdn.net/article/details?id=43987599</a></li>
<li><a href="http://forum.ubuntu.org.cn/viewtopic.php?t=445434" target="_blank" rel="external">http://forum.ubuntu.org.cn/viewtopic.php?t=445434</a></li>
<li><a href="http://www.tuicool.com/articles/6N3e2ir" target="_blank" rel="external">http://www.tuicool.com/articles/6N3e2ir</a></li>
<li><a href="https://www.blackmoreops.com/2013/11/22/install-amd-app-sdk-kali-linux/" target="_blank" rel="external">https://www.blackmoreops.com/2013/11/22/install-amd-app-sdk-kali-linux/</a></li>
<li><a href="http://blog.csdn.net/vblittleboy/article/details/8979288" target="_blank" rel="external">http://blog.csdn.net/vblittleboy/article/details/8979288</a></li>
<li><a href="http://blog.csdn.net/zahuopuboss/article/details/50927432" target="_blank" rel="external">http://blog.csdn.net/zahuopuboss/article/details/50927432</a></li>
<li><a href="http://stackoverflow.com/questions/27971707/using-pythontheano-with-opencl-in-an-amd-gpu" target="_blank" rel="external">http://stackoverflow.com/questions/27971707/using-pythontheano-with-opencl-in-an-amd-gpu</a></li>
<li><a href="http://stackoverflow.com/questions/11114225/installing-scipy-and-numpy-using-pip" target="_blank" rel="external">http://stackoverflow.com/questions/11114225/installing-scipy-and-numpy-using-pip</a></li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://marcovaldong.github.io/2016/07/08/Ubuntu14-04-Theano-OpenCL-libgpuarray实现GPU运算/" data-id="cjfguskip0019cgurip0w61hz" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Machine-Learning/">Machine Learning</a><a href="/tags/Theano/">Theano</a></div><div class="post-nav"><a href="/2016/07/20/Theano实现kaggle手写识别/" class="pre">Theano实现kaggle手写识别</a><a href="/2016/06/12/使用Theano实现kaggle手写识别/" class="next">使用Theano实现kaggle手写识别</a></div><div data-thread-key="2016/07/08/Ubuntu14-04-Theano-OpenCL-libgpuarray实现GPU运算/" data-title="Ubuntu14.04+Theano+OpenCL+libgpuarray实现GPU运算" data-url="http://marcovaldong.github.io/2016/07/08/Ubuntu14-04-Theano-OpenCL-libgpuarray实现GPU运算/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  owner: 'marcovaldong',
  repo: 'marcovaldong.github.io',
  oauth: {
    client_id: '3f1a34510c57772de8f8',
    client_secret: '69b8be94d1b53df548e46b9be32356b79e974d3c',
  },
})
gitment.render('container')
</script><div data-thread-key="2016/07/08/Ubuntu14-04-Theano-OpenCL-libgpuarray实现GPU运算/" data-title="Ubuntu14.04+Theano+OpenCL+libgpuarray实现GPU运算" data-url="http://marcovaldong.github.io/2016/07/08/Ubuntu14-04-Theano-OpenCL-libgpuarray实现GPU运算/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://marcovaldong.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Deep-Learning/">Deep Learning</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Deep-Learning/信息隐藏/">信息隐藏</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/">Machine Learning</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Machine-Learning/Neural-Network/">Neural Network</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/">读书</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Deep-Learning/" style="font-size: 15px;">Deep Learning</a> <a href="/tags/Machine-Learning/" style="font-size: 15px;">Machine Learning</a> <a href="/tags/读书/" style="font-size: 15px;">读书</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Theano/" style="font-size: 15px;">Theano</a> <a href="/tags/Tensorflow/" style="font-size: 15px;">Tensorflow</a> <a href="/tags/Kaggle/" style="font-size: 15px;">Kaggle</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/信息隐藏/" style="font-size: 15px;">信息隐藏</a> <a href="/tags/Steganography/" style="font-size: 15px;">Steganography</a> <a href="/tags/语义分割/" style="font-size: 15px;">语义分割</a> <a href="/tags/面经/" style="font-size: 15px;">面经</a> <a href="/tags/Neural-Network/" style="font-size: 15px;">Neural Network</a> <a href="/tags/机器学习基石/" style="font-size: 15px;">机器学习基石</a> <a href="/tags/steganalysis/" style="font-size: 15px;">steganalysis</a> <a href="/tags/Pose-Estimation/" style="font-size: 15px;">Pose Estimation</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/01/My-reading-list2/">My reading list</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/27/小米面经/">小米面经</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/10/关于sematic-segmentation的几篇论文（二）/">关于sematic segmentation的几篇论文（二）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/31/论文阅读：RealTime-Multi-Person-2D-Pose-Estimation-using-Part-Affinity-Fields/">论文阅读：RealTime Multi-Person 2D Pose Estimation using Part Affinity Fields</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/31/关于semantic-segmentation的几篇论文/">关于semantic segmentation的几篇论文</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/06/于众目睽睽之下隐藏图像：深度隐写术/">于众目睽睽之下隐藏图像：深度隐写术</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/08/深度学习在信息隐藏中的应用（下）/">深度学习在信息隐藏中的应用（下）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/06/深度学习在信息隐藏中的应用（上）/">深度学习在信息隐藏中的应用（上）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/14/使用Tensorflow实现Titanic比赛/">使用Tensorflow实现Titanic比赛</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/19/Python爬虫小结之Selenium/">Python爬虫小结之Selenium</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://killersdeath.github.io" title="抄作业的小东" target="_blank">抄作业的小东</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Marcovaldo.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'marcovaldo'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?2be92f134440f46356c71aa55035a144";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>